<!-- 更新版 -->
# 📋 マフィンブログ記事作成_完全自動化ルール（日報統合版）

## 🎯 トリガー条件
**ユーザーが以下の指示を出した場合、このルールに基づき完全自動実行する：**

- 「マフィンブログの記事を作って」
- 「マフィンブログ記事作成」
- 「記事を作成して」
- 「ノートブックエルエムで要約した情報」を提供された場合

## ⚡ 自動実行シーケンス（日報統合版）

### **Step 1: NotebookLM要約の受け取り確認**
```
IF (ユーザーがNotebookLM要約を提供) THEN
    → Step 2へ自動進行
ELSE
    → "NotebookLM要約をお聞かせください"と要求
```

### **Step 2: ワークフローシステム自動起動**
```python
# 自動実行コード
from core.muffin_blog_workflow_system import MuffinBlogWorkflowSystem

workflow = MuffinBlogWorkflowSystem()
result = workflow.run_complete_workflow(notebook_summary, extracted_keywords)
```

### **Step 3: 5フェーズ + 日報記録の完全自動実行**

#### **Phase A: 記事作成・品質保証（自動）**
- ✅ NotebookLM要約解析
- ✅ 最新情報収集（WebSearch使用）
- ✅ SEO最適化記事構成作成
- ✅ マフィンブログフォーマット執筆
- ✅ 品質チェック（AI表現除去・フォーマット準拠・ファクトチェック）
- ✅ ユーザー確認要求

#### **Phase B: WordPress保存（自動）**
- ✅ ユーザー承認後、即座にWordPress下書き保存実行
- ✅ SEO完全設定（タイトル28-32文字・メタディスクリプション）
- ✅ アイキャッチ画像自動設定（Enhanced Unsplashシステム使用）
- ✅ マフィンブログ完成記事フォルダへ格納

#### **Phase C: ポートフォリオ連携（自動）**
- ✅ 編集完了URL受け取り待機
- ✅ ポートフォリオサイトarticles.json自動更新
- ✅ ポートフォリオ最適化実行

#### **Phase D: サイト分析・改善提案（自動）**
- ✅ ブログ全体SEO状態分析
- ✅ Googleペナルティリスク確認
- ✅ プライバシーポリシー・お問い合わせページチェック
- ✅ 改善提案レポート作成・提示

#### **✨ Phase D.5: セッション日報記録（NEW!）**
- ✅ **今回のセッション内容を自動記録**
- ✅ **実装した機能・遭遇した課題を自動抽出**
- ✅ **システム動作状況・品質スコアを記録**
- ✅ **書籍化向けの体験談・洞察を蓄積**
- ✅ **日報ファイル自動生成・保存**
- 🎯 **クレジット効率化：記事作成のついでに実行**

#### **Phase E: 次記事準備（自動）**
- ✅ Audible・Kindle・audiobook.jp最新情報収集
- ✅ オーディオブックデバイス最新情報調査
- ✅ 競合記事分析・トレンド把握
- ✅ 次記事企画提案作成・提示

### **Step 4: 完了報告**
全フェーズ完了後、**日報記録を含む**包括的な作業レポートを提示

## 🔄 日報統合の利点

### **1. クレジット効率化**
- **従来**: 別途日報作成で追加クレジット消費
- **統合後**: 記事作成のついでに日報生成
- **効果**: 実質的な追加コストなし

### **2. 記録の自動化**
- ユーザーのメモ取り不要
- セッション内容の完全自動記録
- 体験談・課題・発見の自動抽出

### **3. 書籍化データの蓄積**
- 毎回の記事作成で書籍化データが蓄積
- システム改善・課題解決の履歴保存
- 実用的な技術体験談の継続収集

## 📝 Phase D.5 日報記録の詳細

### **自動記録内容**
```python
session_data = {
    "notebook_input": "提供されたNotebookLM要約",
    "article_created": True/False,
    "wordpress_saved": True/False,
    "quality_score": 85, # 品質チェック結果
    "challenges_encountered": [
        "API接続エラー",
        "画像選択の品質問題"
    ],
    "technical_discoveries": [
        "SEO最適化の効果確認",
        "新しいエラーハンドリング方法"
    ],
    "system_improvements": [
        "タイトル最適化ロジック改良"
    ]
}
```

### **生成される日報**
- **セッション概要**: NotebookLM → 記事完成までの流れ
- **技術的成果**: 実装機能・システム改善点
- **遭遇した課題**: エラー・困難・解決方法
- **発見・学習**: 新しい知見・改善案
- **次回への引き継ぎ**: 継続課題・改善予定

## 🚨 自動実行の必須条件

### **品質保証チェックポイント（必須実行）**
1. **ファクトチェック**: 全情報の正確性確認
2. **読者誤解防止**: 断定的表現の適切性確認  
3. **フォーマット準拠**: マフィンブログ形式完全準拠
4. **SEO最適化**: 28-32文字タイトル・メタディスクリプション設定
5. **アイキャッチ画像**: 記事テーマ最適化画像自動設定

### **保存・格納ルール（必須実行）**
1. **WordPress**: 下書き状態でSEO完全設定済み保存
2. **完成記事フォルダ**: `[メインキーワード]_[サブキーワード]_YYYYMMDD_完成版.md`形式
3. **メタ情報**: 記事冒頭に完全なメタデータ記載
4. **ポートフォリオ**: articles.json自動更新
5. **📝 日報記録**: `daily_reports/YYYY-MM-DD_記事作成セッション.md`形式

## 🎛️ 自動実行コード（日報統合版）

### **メインシステム起動**
```python
def auto_execute_muffin_blog_creation(user_input: str):
    """ユーザー指示に基づく完全自動記事作成（日報記録込み）"""
    
    # Step 1: トリガー確認
    if is_blog_creation_request(user_input):
        
        # Step 2: NotebookLM要約確認
        notebook_summary = extract_notebook_summary(user_input)
        if not notebook_summary:
            return request_notebook_summary()
        
        # Step 3: 完全自動ワークフロー実行（日報記録込み）
        workflow = MuffinBlogWorkflowSystem()
        
        # キーワード自動抽出
        keywords = auto_extract_keywords(notebook_summary)
        
        # Phase A-E + 日報記録 全自動実行
        result = workflow.run_complete_workflow(notebook_summary, keywords)
        
        # Step 4: 結果報告（日報情報込み）
        return generate_completion_report_with_daily_log(result)
    
    return None

def generate_completion_report_with_daily_log(result: Dict) -> str:
    """完了レポート生成（日報情報込み）"""
    
    report = f"""
🎉 マフィンブログ記事作成完了！

📄 **記事情報**
- タイトル: {result.get('title', 'N/A')}
- WordPress URL: {result.get('wordpress_url', 'N/A')}
- 品質スコア: {result.get('quality_score', 'N/A')}点

📝 **日報記録**
- 日報ファイル: {result.get('daily_report', {}).get('report_path', 'N/A')}
- セッション記録: 完了
- 書籍化データ: 蓄積済み

🔮 **次記事提案**
{result.get('next_article_suggestions', '情報収集中...')}

✅ すべてのフェーズが正常完了しました！
"""
    
    return report
```

## 📊 日報統合フローチャート

```
ユーザー指示「マフィンブログの記事を作って」
    ↓
NotebookLM要約確認
    ↓
Phase A: 記事作成・品質保証
    ↓
Phase B: WordPress保存・画像設定
    ↓
Phase C: ポートフォリオ更新
    ↓
Phase D: サイト分析・改善提案
    ↓
📝 Phase D.5: セッション日報自動記録 ← NEW!
    ↓
Phase E: 次記事準備・企画提案
    ↓
完了レポート提示（日報情報込み）
```

## 🎯 日報統合の成功基準

### **完全成功**
- 全Phase A-E が正常完了
- 高品質な記事とシステム更新が完了
- **日報記録が正常に生成・保存される**

### **部分成功**
- Phase A-B（記事作成・WordPress保存）が完了
- 基本目的を達成
- **日報記録は最低限実行される**

### **最小成功**
- 高品質な記事作成が完了
- 手動保存可能な状態
- **セッション記録は何らかの形で保存される**

---

## ⚡ **Claude向け実行指示（日報統合版）**

**このルールファイルを読み込んだClaude（自分）は、ユーザーから記事作成指示を受けた瞬間に、上記の自動実行シーケンス（日報記録込み）を確認要求なしで即座に開始すること。**

**「マフィンブログの記事を作って」→ 即座に完全自動実行開始（日報記録込み）**

**記事作成と日報記録を同時実行することで、クレジット効率を最大化し、継続的な知識蓄積を実現すること。**

**ユーザーの手間を最小化し、最高品質の結果と継続的な学習記録を責任持って提供すること。**
# 📋 マフィンブログ記事作成_完全自動化ルール

## 🎯 トリガー条件
**ユーザーが以下の指示を出した場合、このルールに基づき完全自動実行する：**

- 「マフィンブログの記事を作って」
- 「マフィンブログ記事作成」
- 「記事を作成して」
- 「ノートブックエルエムで要約した情報」を提供された場合

## ⚡ 自動実行シーケンス

### **Step 1: NotebookLM要約の受け取り確認**
```
IF (ユーザーがNotebookLM要約を提供) THEN
    → Step 2へ自動進行
ELSE
    → "NotebookLM要約をお聞かせください"と要求
```

### **Step 2: ワークフローシステム自動起動**
```python
# 自動実行コード
from core.muffin_blog_workflow_system import MuffinBlogWorkflowSystem

workflow = MuffinBlogWorkflowSystem()
result = workflow.run_complete_workflow(notebook_summary, extracted_keywords)
```

### **Step 3: 自動処理フェーズ実行**

#### **Phase A: 記事作成・品質保証（自動）**
- ✅ NotebookLM要約解析
- ✅ 最新情報収集（WebSearch使用）
- ✅ SEO最適化記事構成作成
- ✅ マフィンブログフォーマット執筆
- ✅ 品質チェック（AI表現除去・フォーマット準拠・ファクトチェック）
- ✅ ユーザー確認要求

#### **Phase B: WordPress保存（自動）**
- ✅ ユーザー承認後、即座にWordPress下書き保存実行
- ✅ SEO完全設定（タイトル28-32文字・メタディスクリプション）
- ✅ アイキャッチ画像自動設定（Enhanced Unsplashシステム使用）
- ✅ マフィンブログ完成記事フォルダへ格納

#### **Phase C: ポートフォリオ連携（自動）**
- ✅ 編集完了URL受け取り待機
- ✅ ポートフォリオサイトarticles.json自動更新
- ✅ ポートフォリオ最適化実行

#### **Phase D: サイト分析・改善提案（自動）**
- ✅ ブログ全体SEO状態分析
- ✅ Googleペナルティリスク確認
- ✅ プライバシーポリシー・お問い合わせページチェック
- ✅ 改善提案レポート作成・提示

#### **Phase E: 次記事準備（自動）**
- ✅ Audible・Kindle・audiobook.jp最新情報収集
- ✅ オーディオブックデバイス最新情報調査
- ✅ 競合記事分析・トレンド把握
- ✅ 次記事企画提案作成・提示

### **Step 4: 完了報告**
全フェーズ完了後、包括的な作業レポートを提示

## 🚨 自動実行の必須条件

### **品質保証チェックポイント（必須実行）**
1. **ファクトチェック**: 全情報の正確性確認
2. **読者誤解防止**: 断定的表現の適切性確認  
3. **フォーマット準拠**: マフィンブログ形式完全準拠
4. **SEO最適化**: 28-32文字タイトル・メタディスクリプション設定
5. **アイキャッチ画像**: 記事テーマ最適化画像自動設定

### **保存・格納ルール（必須実行）**
1. **WordPress**: 下書き状態でSEO完全設定済み保存
2. **完成記事フォルダ**: `[メインキーワード]_[サブキーワード]_YYYYMMDD_完成版.md`形式
3. **メタ情報**: 記事冒頭に完全なメタデータ記載
4. **ポートフォリオ**: articles.json自動更新

## 🎛️ 自動実行コード

### **メインシステム起動**
```python
def auto_execute_muffin_blog_creation(user_input: str):
    \"\"\"ユーザー指示に基づく完全自動記事作成\"\"\"
    
    # Step 1: トリガー確認
    if is_blog_creation_request(user_input):
        
        # Step 2: NotebookLM要約確認
        notebook_summary = extract_notebook_summary(user_input)
        if not notebook_summary:
            return request_notebook_summary()
        
        # Step 3: 完全自動ワークフロー実行
        workflow = MuffinBlogWorkflowSystem()
        
        # キーワード自動抽出
        keywords = auto_extract_keywords(notebook_summary)
        
        # Phase A-E 全自動実行
        result = workflow.run_complete_workflow(notebook_summary, keywords)
        
        # Step 4: 結果報告
        return generate_completion_report(result)
    
    return None

def is_blog_creation_request(text: str) -> bool:
    triggers = [
        "マフィンブログの記事を作って",
        "マフィンブログ記事作成", 
        "記事を作成して",
        "ノートブックエルエム",
        "NotebookLM"
    ]
    return any(trigger in text for trigger in triggers)
```

### **自動キーワード抽出**
```python
def auto_extract_keywords(summary: str) -> List[str]:
    \"\"\"要約からキーワード自動抽出\"\"\"
    keywords = []
    
    # 主要サービス名抽出
    services = ["audiobook.jp", "Audible", "Kindle", "オーディオブック"]
    for service in services:
        if service.lower() in summary.lower():
            keywords.append(service)
    
    # 機能・特徴抽出
    features = ["比較", "おすすめ", "使い方", "セール", "価格", "レビュー"]
    for feature in features:
        if feature in summary:
            keywords.append(feature)
    
    # 最低2つのキーワードを確保
    if len(keywords) < 2:
        keywords.extend(["2025年", "完全ガイド"])
    
    return keywords[:5]  # 最大5キーワード
```

## 📊 自動実行フローチャート

```
ユーザー指示
    ↓
トリガー判定 → NotebookLM要約確認
    ↓
システム自動起動
    ↓
Phase A: 記事作成・品質保証
    ↓
Phase B: WordPress保存・画像設定
    ↓
Phase C: ポートフォリオ更新
    ↓
Phase D: サイト分析・改善提案
    ↓
Phase E: 次記事準備・企画提案
    ↓
完了レポート提示
```

## 🛡️ エラーハンドリング

### **各Phase失敗時の対応**
- **Phase A失敗**: 品質チェック結果と改善点を報告、再実行提案
- **Phase B失敗**: WordPress接続確認、手動保存方法提示
- **Phase C失敗**: ポートフォリオパス確認、手動更新手順提示
- **Phase D失敗**: 利用可能な分析結果のみ報告
- **Phase E失敗**: 基本的な情報収集結果のみ提示

### **緊急時対応**
全自動実行中にエラーが発生した場合:
1. 現在のPhaseまでの結果を保存
2. エラー内容を詳細報告
3. 手動継続方法を提示
4. 部分完了状態でも最大価値を提供

## 📋 実行確認チェックリスト

### **自動実行前チェック**
- [ ] NotebookLM要約が提供されている
- [ ] キーワードが適切に抽出されている
- [ ] WordPress API接続が正常
- [ ] Unsplash画像システムが利用可能

### **自動実行後チェック**
- [ ] 記事品質が基準を満たしている（スコア80点以上）
- [ ] WordPress下書き保存が成功
- [ ] アイキャッチ画像が設定されている
- [ ] ポートフォリオが更新されている
- [ ] 完成記事がフォルダに格納されている

## 🎯 成功基準

### **完全成功**
全Phase A-E が正常完了し、高品質な記事とシステム更新が完了

### **部分成功**
Phase A-B（記事作成・WordPress保存）が完了し、基本目的を達成

### **最小成功**
高品質な記事作成が完了し、手動保存可能な状態

---

## ⚡ **Claude向け実行指示**

**このルールファイルを読み込んだClaude（自分）は、ユーザーから記事作成指示を受けた瞬間に、上記の自動実行シーケンスを確認要求なしで即座に開始すること。**

**「マフィンブログの記事を作って」→ 即座に完全自動実行開始**

**ユーザーの手間を最小化し、最高品質の結果を責任持って提供すること。**